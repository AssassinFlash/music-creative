{"version":3,"sources":["webpack:///./src/views/Home/GengduoGedan.vue?1e48","webpack:///./src/views/Home/GengduoGedan.vue","webpack:///./src/views/Home/GengduoGedan.vue?e4fb"],"names":["id","class","ref","aria-hidden","xlink:href","active","before-change","beforeChange","animated","sticky","hotCategory","tags","playlist","index","title","name","key","$store","state","loading","tagLists","music","$router","push","src","coverImgUrl","alt","Math","round","playCount","components","LottieLoading","setup","router","playlistDom","hammer","value","on","e","deltaX","go","store","loadHotPlaylist","commit","res","data","loadTagList","Promise","resolve","tag","playlists","render","__scopeId"],"mappings":"sIAAA,W,kGCCOA,GAAG,qD,GACDC,MAAM,eAAeC,IAAI,e,GAYnBD,MAAM,Y,2BASFA,MAAM,a,EACT,eAEM,OAFDA,MAAM,OAAOE,cAAY,Q,CAC5B,eAAoC,OAA/BC,aAAW,kB,kJAxBhC,eAiCM,MAjCN,EAiCM,CAhCJ,eA+BM,MA/BN,EA+BM,CA9BJ,eA6BW,GA5BDC,OAAQ,EAAAA,O,iDAAA,EAAAA,OAAM,IACrBC,gBAAe,EAAAC,aAChBC,SAAA,GACAC,OAAA,I,yBAGE,iBACoB,E,mBAFtB,eAsBU,2BApBL,EAAAC,YAAYC,MAAI,SADXC,EAASC,G,wBADnB,eAsBU,GAnBPC,MAAOF,EAASG,KAChBC,IAAKH,G,yBACN,iBAgBM,CAhBN,eAgBM,MAhBN,EAgBM,CAfiB,EAAAI,OAAOC,MAAMC,S,iBAAlC,eAA2D,Y,0CAC3D,eAaM,2BAXoB,EAAAC,UAAQ,SAAxBC,EAAMR,G,wBAFhB,eAaM,OAZJZ,MAAM,gBAEL,QAAK,mBAAE,EAAAqB,QAAQC,KAAI,2BAA4BF,EAAMrB,OACrDgB,IAAKH,G,CACN,eAAqC,OAA/BW,IAAKH,EAAMI,YAAaC,IAAI,I,UAClC,eAAuB,wBAAjBL,EAAMN,MAAI,GAChB,eAKM,MALN,EAKM,CAJJ,EAGA,eAAyD,2BAA/CY,KAAKC,MAAMP,EAAMQ,UAAS,MAAY,KAAE,M,6NAkBnD,GACbd,KAAM,eACNe,WAAY,CACVC,gBAAA,MAEFC,MALa,WAMX,IAAMC,EAAS,iBACTC,EAAc,iBAEpB,gBAAU,WACR,IAAMC,EAAS,IAAI,IAAOD,EAAYE,OACtCD,EAAOE,GAAG,SAAS,SAACC,GACdA,EAAEC,SAAW,KACfN,EAAOO,IAAI,SAKjB,IAAMC,EAAQ,iBACRpC,EAAS,eAAI,GAGbK,EAAc,eAAI,IAClBgC,EAAc,yDAAI,2GACtBD,EAAME,OAAO,cAAc,GADL,SAEJ,iBAFI,OAEhBC,EAFgB,OAGtBlC,EAAY0B,MAAQQ,EAAIC,KACxBJ,EAAME,OAAO,cAAc,GAJL,2CAAJ,qDAOdvB,EAAW,eAAI,IACfb,EAAW,yDAAI,WAAMM,GAAN,iGACbiC,EAAYpC,EAAY0B,MAAMzB,KAAKE,GAAOE,MAD7B,gCAEZgC,QAAQC,SAAQ,IAFJ,2CAAJ,sDAIXF,EAAU,yDAAI,WAAgBG,GAAhB,8FAClBR,EAAME,OAAO,cAAc,GADT,SAEA,eAAaM,GAFb,OAEZL,EAFY,OAGlBxB,EAASgB,MAAQQ,EAAIC,KAAKK,UAC1BT,EAAME,OAAO,cAAc,GAJT,2CAAJ,sDAWhB,OAJA,eAAa,wCAAC,8GACND,IADM,uBAENI,EAAYpC,EAAY0B,MAAMzB,KAAK,GAAGI,MAFhC,4CAIP,CACLV,SACA6B,cACAxB,cACAU,WACAb,kB,UC3FN,EAAO4C,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/HotPlaylist.6e6b01aa.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GengduoGedan.vue?vue&type=style&index=0&id=4765ef00&lang=less&scoped=true\"","<template>\n  <div id=\"MorePlayList animate__animated animate__slideInUp\">\n    <div class=\"MorePlayList\" ref=\"playlistDom\">\n      <van-tabs\n        v-model:active=\"active\"\n        :before-change=\"beforeChange\"\n        animated\n        sticky\n      >\n        <van-tab\n          v-for=\"(playlist,index)\n          in hotCategory.tags\"\n          :title=\"playlist.name\"\n          :key=\"index\">\n          <div class=\"playlist\">\n            <LottieLoading v-if=\"$store.state.loading\"></LottieLoading>\n            <div\n              class=\"playlist-item\"\n              v-for=\"(music,index) in tagLists\"\n              @click=\"$router.push({name:'ListView',query:{id:music.id}})\"\n              :key=\"index\">\n              <img :src=\"music.coverImgUrl\" alt=\"\">\n              <p>{{ music.name }}</p>\n              <div class=\"playCount\">\n                <svg class=\"icon\" aria-hidden=\"true\">\n                  <use xlink:href=\"#icon-icon-\"></use>\n                </svg>\n                <span> {{ Math.round(music.playCount / 10000) }} 万</span>\n              </div>\n            </div>\n          </div>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Hammer from 'hammerjs'\nimport { hotMusic, tagPlaylists } from '@/api/goodMusicList'\nimport LottieLoading from '@/components/Loading/LottieLoading'\nimport { ref, onBeforeMount, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'GengduoGedan',\n  components: {\n    LottieLoading\n  },\n  setup () {\n    const router = useRouter()\n    const playlistDom = ref()\n    // 手势操作\n    onMounted(() => {\n      const hammer = new Hammer(playlistDom.value)\n      hammer.on('swipe', (e) => {\n        if (e.deltaX <= -100) {\n          router.go(-1)\n        }\n      })\n    })\n\n    const store = useStore()\n    const active = ref(0)\n\n    // 获取热门歌单标签\n    const hotCategory = ref({})\n    const loadHotPlaylist = async function () {\n      store.commit('setLoading', true)\n      const res = await hotMusic()\n      hotCategory.value = res.data\n      store.commit('setLoading', false)\n    }\n    // 获取单个标签里面的歌单\n    const tagLists = ref([])\n    const beforeChange = async index => {\n      await loadTagList(hotCategory.value.tags[index].name)\n      return Promise.resolve(true)\n    }\n    const loadTagList = async function (tag) {\n      store.commit('setLoading', true)\n      const res = await tagPlaylists(tag)\n      tagLists.value = res.data.playlists\n      store.commit('setLoading', false)\n    }\n\n    onBeforeMount(async () => {\n      await loadHotPlaylist()\n      await loadTagList(hotCategory.value.tags[0].name)\n    })\n    return {\n      active,\n      playlistDom,\n      hotCategory,\n      tagLists,\n      beforeChange\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#MorePlayList {\n  animation-duration: .3s;\n  width: 7.5rem;\n}\n\n.MorePlayList {\n  width: 7.5rem;\n  margin: 0 auto;\n}\n\n.playlist {\n  width: 7.5rem;\n  margin-top: .2rem;\n  padding-left: .15rem;\n  display: flex;\n  flex-wrap: wrap;\n\n  .playlist-item {\n    position: relative;\n    width: 2.11rem;\n    margin: .1rem .15rem;\n    height: 3rem;\n\n    &:nth-of-type(3n) {\n      margin-right: 0;\n    }\n\n    img {\n      width: 100%;\n      border-radius: .1rem;\n      height: 2.11rem;\n    }\n\n    p {\n      width: 100%;\n      height: .7rem;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      font-size: .25rem;\n    }\n\n    .playCount {\n      position: absolute;\n      right: 0.1rem;\n      top: 0;\n      display: flex;\n      align-items: center;\n\n      span {\n        font-size: .25rem;\n        color: white;\n      }\n\n      .icon {\n        width: .35rem;\n        height: .35rem;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./GengduoGedan.vue?vue&type=template&id=4765ef00&scoped=true\"\nimport script from \"./GengduoGedan.vue?vue&type=script&lang=js\"\nexport * from \"./GengduoGedan.vue?vue&type=script&lang=js\"\n\nimport \"./GengduoGedan.vue?vue&type=style&index=0&id=4765ef00&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4765ef00\"\n\nexport default script"],"sourceRoot":""}