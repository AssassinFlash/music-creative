(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{2532:function(e,t,s){"use strict";var n=s("23e7"),a=s("5a34"),i=s("1d80"),r=s("577e"),c=s("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~r(i(this)).indexOf(r(a(e)),arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(e,t,s){"use strict";s.r(t);var n=s("7a23"),a={id:"searchPage"},i={class:"searchPage"};function r(e,t,s,r,c,o){var d=Object(n["L"])("searchTop");return Object(n["E"])(),Object(n["h"])("div",a,[Object(n["i"])("div",i,[Object(n["l"])(d)])])}Object(n["H"])("data-v-064ebfb2");var c={id:"searchTop"},o={class:"searchTop animate__animated animate__slideInUp"},d={class:"topNav"},l=Object(n["i"])("svg",{class:"icon","aria-hidden":"true"},[Object(n["i"])("use",{"xlink:href":"#icon-prev"})],-1),u=[l],h={class:"right"},b=["placeholder"],O={class:"history"},j=Object(n["i"])("div",{class:"historyLeft"},"历史",-1),f={class:"historyRight"},g=["onClick"],v={key:1,class:"songList animate__animated animate__slideInUp"},p={class:"songList-top"},y={class:"left"},w=Object(n["i"])("svg",{class:"icon","aria-hidden":"true"},[Object(n["i"])("use",{"xlink:href":"#icon-bofang"})],-1),m={class:"songCount"},k=Object(n["i"])("span",{class:"s-title"},"播放全部",-1),S={class:"s-count"},L={class:"list"},x=["onClick"],C={class:"left"},K={class:"index"},I={class:"content"},E={class:"song-title"},_={class:"song-author"},T=Object(n["j"])('<div class="right" data-v-064ebfb2><svg class="icon" aria-hidden="true" data-v-064ebfb2><use xlink:href="#icon-bofang1" data-v-064ebfb2></use></svg><svg class="icon" aria-hidden="true" data-v-064ebfb2><use xlink:href="#icon-sandian1" data-v-064ebfb2></use></svg></div>',1);function $(e,t,s,a,i,r){var l=Object(n["L"])("LottieLoading");return Object(n["E"])(),Object(n["h"])("div",c,[Object(n["i"])("div",o,[Object(n["i"])("div",d,[Object(n["i"])("div",{class:"back",onClick:t[0]||(t[0]=function(t){return e.$router.go(-1)})},u),Object(n["i"])("div",h,[Object(n["U"])(Object(n["i"])("input",{type:"text",placeholder:i.placeholder,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.searchKeywords=e}),onKeydown:t[2]||(t[2]=Object(n["V"])((function(){return r.saveKeywords&&r.saveKeywords.apply(r,arguments)}),["enter"]))},null,40,b),[[n["Q"],i.searchKeywords]])])]),Object(n["i"])("div",O,[j,Object(n["i"])("div",f,[(Object(n["E"])(!0),Object(n["h"])(n["a"],null,Object(n["K"])(i.keywordList,(function(e,t){return Object(n["E"])(),Object(n["h"])("div",{class:"keywordItem",key:t,onClick:function(t){return r.autoSearch(e)}},Object(n["O"])(e),9,g)})),128))])]),Object(n["i"])("div",null,[e.$store.state.loading?(Object(n["E"])(),Object(n["f"])(l,{key:0})):Object(n["g"])("",!0),i.isShow?(Object(n["E"])(),Object(n["h"])("div",v,[Object(n["i"])("div",p,[Object(n["i"])("div",y,[w,Object(n["i"])("div",m,[k,Object(n["i"])("span",S,"(共"+Object(n["O"])(i.songCount)+"首)",1)])])]),Object(n["i"])("div",L,[(Object(n["E"])(!0),Object(n["h"])(n["a"],null,Object(n["K"])(i.playlist,(function(e,t){return Object(n["E"])(),Object(n["h"])("div",{class:"songItem",key:t,onClick:function(s){return r.getControllerFullSongs(e.id,t)}},[Object(n["i"])("div",C,[Object(n["i"])("p",K,Object(n["O"])(t+1),1),Object(n["i"])("div",I,[Object(n["i"])("p",E,Object(n["O"])(e.name),1),Object(n["i"])("p",_,Object(n["O"])(r.author(e.ar))+" - "+Object(n["O"])(e.name),1)])]),T],8,x)})),128))])])):Object(n["g"])("",!0)])])])}Object(n["F"])();var P=s("1da1"),J=s("5530"),R=(s("96cf"),s("caad"),s("2532"),s("4160"),s("159b"),s("fb6a"),s("7a5c")),N=s("986e"),U=s("f96a"),F=s("5502"),V={name:"SearchTop",components:{LottieLoading:U["a"]},data:function(){return{placeholder:"输入要搜寻的关键词",searchKeywords:"",keywordList:[],isShow:!1,playlist:[{}],songCount:0}},beforeMount:function(){this.$route.params.name&&this.autoSearch(this.$route.params.name),this.keywordList=window.localStorage.getItem("keywordList")?JSON.parse(window.localStorage.getItem("keywordList")):[]},methods:Object(J["a"])(Object(J["a"])({},Object(F["b"])(["setPlaylist","setSongId","setPlayCurrentIndex"])),{},{saveKeywords:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.keywordList.length>=1?(s=e.keywordList.includes(e.searchKeywords),s||(e.keywordList.push(e.searchKeywords),window.localStorage.setItem("keywordList",JSON.stringify(e.keywordList)))):(e.keywordList.push(e.searchKeywords),window.localStorage.setItem("keywordList",JSON.stringify(e.keywordList))),t.next=3,e.loadSearchSong(e.searchKeywords);case 3:case"end":return t.stop()}}),t)})))()},loadSearchSong:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("setLoading",!0),e.next=3,Object(R["k"])(t);case 3:s=e.sent,this.playlist=s.data.result.songs,this.songCount=s.data.result.songCount,this.isShow=!0,this.$store.commit("setLoading",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),author:function(e){var t="";return e.forEach((function(e){t+=e.name+"、"})),t=t.slice(0,t.length-1),t},getControllerFullSongs:function(e,t){this.setPlaylist(this.playlist),this.setSongId(e),this.setPlayCurrentIndex(t),this.$store.dispatch("reqLyric",e),N["a"].emit("updateController")},autoSearch:function(e){this.searchKeywords=e,this.loadSearchSong(e)}})};s("cc40");V.render=$,V.__scopeId="data-v-064ebfb2";var q=V,A={name:"Search",components:{searchTop:q}};A.render=r;t["default"]=A},"5a34":function(e,t,s){var n=s("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"638d":function(e,t,s){},ab13:function(e,t,s){var n=s("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(s){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,s){"use strict";var n=s("23e7"),a=s("4d64").includes,i=s("44d2");n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},cc40:function(e,t,s){"use strict";s("638d")}}]);
//# sourceMappingURL=Search.817c74d0.js.map