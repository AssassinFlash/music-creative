{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./src/views/Search.vue","webpack:///./src/components/Search/SearchTop.vue","webpack:///./src/components/Search/SearchTop.vue?4cc1","webpack:///./src/views/Search.vue?0900","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./src/components/Search/SearchTop.vue?cf77"],"names":["$","notARegExp","requireObjectCoercible","toString","correctIsRegExpLogic","target","proto","forced","includes","searchString","this","indexOf","arguments","length","undefined","id","class","aria-hidden","xlink:href","$router","go","type","placeholder","searchKeywords","saveKeywords","keywordList","keyword","index","key","autoSearch","$store","state","loading","isShow","songCount","playlist","song","getControllerFullSongs","name","author","ar","components","LottieLoading","data","beforeMount","$route","params","window","localStorage","getItem","JSON","parse","methods","ifExist","push","setItem","stringify","loadSearchSong","commit","res","result","songs","val","forEach","x","slice","songId","setPlaylist","setSongId","setPlayCurrentIndex","dispatch","emit","render","__scopeId","searchTop","isRegExp","module","exports","it","TypeError","wellKnownSymbol","MATCH","METHOD_NAME","regexp","error1","error2","$includes","addToUnscopables","el"],"mappings":"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","file":"js/Search.817c74d0.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~toString(requireObjectCoercible(this))\n      .indexOf(toString(notARegExp(searchString)), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <div id=\"searchPage\">\n    <div class=\"searchPage\">\n      <searchTop></searchTop>\n    </div>\n  </div>\n</template>\n\n<script>\nimport searchTop from '@/components/Search/SearchTop'\n\nexport default {\n  name: 'Search',\n  components: {\n    searchTop\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n","<template>\n  <div id=\"searchTop\">\n    <div class=\"searchTop animate__animated animate__slideInUp\">\n      <div class=\"topNav\">\n        <div class=\"back\" @click=\"$router.go(-1)\">\n          <svg class=\"icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-prev\"></use>\n          </svg>\n        </div>\n        <div class=\"right\">\n          <input\n            type=\"text\"\n            :placeholder=\"placeholder\"\n            v-model=\"searchKeywords\"\n            @keydown.enter=\"saveKeywords\"/>\n        </div>\n      </div>\n      <div class=\"history\">\n        <div class=\"historyLeft\">历史</div>\n        <div class=\"historyRight\">\n          <div\n            class=\"keywordItem\"\n            v-for=\"(keyword,index) in keywordList\"\n            :key=\"index\"\n            @click=\"autoSearch(keyword)\"\n          >{{ keyword }}\n          </div>\n        </div>\n      </div>\n      <div>\n        <LottieLoading v-if=\"$store.state.loading\"></LottieLoading>\n        <div class=\"songList animate__animated animate__slideInUp\" v-if=\"isShow\">\n          <div class=\"songList-top\">\n            <div class=\"left\">\n              <svg class=\"icon\" aria-hidden=\"true\">\n                <use xlink:href=\"#icon-bofang\"></use>\n              </svg>\n              <div class=\"songCount\">\n                <span class=\"s-title\">播放全部</span>\n                <span class=\"s-count\">(共{{ songCount }}首)</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"list\">\n            <div class=\"songItem\"\n                 v-for=\"(song,index) in playlist\"\n                 :key=\"index\" @click=\"getControllerFullSongs(song.id,index)\">\n              <div class=\"left\">\n                <p class=\"index\">{{ index + 1 }}</p>\n                <div class=\"content\">\n                  <p class=\"song-title\">{{ song.name }}</p>\n                  <p class=\"song-author\">{{ author(song.ar) }} - {{ song.name }}</p>\n                </div>\n              </div>\n              <div class=\"right\">\n                <svg class=\"icon\" aria-hidden=\"true\">\n                  <use xlink:href=\"#icon-bofang1\"></use>\n                </svg>\n                <svg class=\"icon\" aria-hidden=\"true\">\n                  <use xlink:href=\"#icon-sandian1\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { searchMusic } from '@/api/goodMusicList'\nimport emitter from '@/utils/eventBus'\nimport LottieLoading from '@/components/Loading/LottieLoading'\nimport { mapMutations } from 'vuex'\n\nexport default {\n  name: 'SearchTop',\n  components: {\n    LottieLoading\n  },\n  data () {\n    return {\n      placeholder: '输入要搜寻的关键词',\n      searchKeywords: '',\n      keywordList: [],\n      isShow: false, // 显示歌单列表\n      playlist: [{}], // 搜寻到的歌曲列表\n      songCount: 0\n    }\n  },\n  beforeMount () {\n    if (this.$route.params.name) {\n      this.autoSearch(this.$route.params.name)\n    }\n    // keywordList是数组，localStorage里是字符串，所以要转换\n    this.keywordList = window.localStorage.getItem('keywordList')\n      ? JSON.parse(window.localStorage.getItem('keywordList')) : []\n  },\n  methods: {\n    ...mapMutations(['setPlaylist', 'setSongId', 'setPlayCurrentIndex']),\n    async saveKeywords () {\n      // localStorage只能存储字符串\n      if (this.keywordList.length >= 1) {\n        const ifExist = this.keywordList.includes(this.searchKeywords)\n        if (!ifExist) {\n          this.keywordList.push(this.searchKeywords)\n          window.localStorage.setItem('keywordList', JSON.stringify(this.keywordList))\n        }\n      } else {\n        this.keywordList.push(this.searchKeywords)\n        window.localStorage.setItem('keywordList', JSON.stringify(this.keywordList))\n      }\n      await this.loadSearchSong(this.searchKeywords)\n    },\n    loadSearchSong: async function (keyword) {\n      this.$store.commit('setLoading', true)\n      const res = await searchMusic(keyword)\n      this.playlist = res.data.result.songs\n      this.songCount = res.data.result.songCount\n      this.isShow = true\n      this.$store.commit('setLoading', false)\n      // console.log(res.data)\n    },\n    author: function (val) {\n      let res = ''\n      val.forEach(x => {\n        res += x.name + '、'\n      })\n      res = res.slice(0, res.length - 1)\n      return res\n    },\n    getControllerFullSongs: function (songId, index) {\n      this.setPlaylist(this.playlist)\n      this.setSongId(songId)\n      this.setPlayCurrentIndex(index)\n      this.$store.dispatch('reqLyric', songId)\n      emitter.emit('updateController')\n    },\n    autoSearch: function (keyword) {\n      this.searchKeywords = keyword\n      this.loadSearchSong(keyword)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#searchTop {\n  .searchTop {\n    width: 7.5rem;\n    animation-duration: .3s;\n\n    .topNav {\n      width: 100%;\n      height: .97rem;\n      padding: .15rem .46rem .15rem .35rem;\n      display: flex;\n      align-items: center;\n\n      .back {\n        width: .5rem;\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-right: .35rem;\n\n        .icon {\n          width: .45rem;\n          height: .45rem;\n        }\n      }\n\n      .right {\n        flex: 1;\n        height: 100%;\n\n        input {\n          display: block;\n          width: 100%;\n          height: 100%;\n          border: none;\n          outline: none;\n          border-bottom: 3px solid #8b8b8b;\n          text-indent: .1rem;\n          font-size: .31rem;\n          line-height: 1.5;\n          letter-spacing: 2px;\n          color: #8b8b8b;\n        }\n      }\n    }\n\n    .history {\n      width: 100%;\n      min-height: .8rem;\n      padding: .1rem .46rem .1rem .35rem;\n      display: flex;\n\n      .historyLeft {\n        width: .8rem;\n        height: .6rem;\n        margin-top: .4rem;\n        display: flex;\n        align-items: center;\n        font-size: .3rem;\n        font-weight: 700;\n      }\n\n      .historyRight {\n        width: 6rem;\n        max-height: 2.3rem;\n        overflow: auto;\n        margin-left: .3rem;\n        display: flex;\n        align-items: center;\n        flex-wrap: wrap;\n\n        .keywordItem {\n          padding: .17rem .25rem;\n          margin-right: .3rem;\n          margin-top: .3rem;\n          background: #f3f3f3;\n          border-radius: .3rem;\n        }\n      }\n    }\n\n    .songList {\n      width: 7.5rem;\n      margin-top: .32rem;\n      animation-duration: .3s;\n\n      .songList-top {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        position: sticky;\n        top: 0;\n        width: 100%;\n        height: .875rem;\n        border-top-left-radius: .35rem;\n        border-top-right-radius: .35rem;\n        background: white;\n        padding: 0 .1rem 0 .27rem;\n\n        .left, .right {\n          display: flex;\n          align-items: center;\n        }\n\n        .left {\n          .icon {\n            width: .41rem;\n            height: .41rem;\n            margin-right: .292rem;\n          }\n\n          .songCount {\n            display: flex;\n            align-items: center;\n\n            .s-title {\n              font-size: .29rem;\n              margin-right: .1rem;\n            }\n\n            .s-count {\n              font-size: .23rem;\n              color: #999999;\n            }\n          }\n        }\n      }\n\n      .list {\n        width: 100%;\n        overflow: auto;\n        background: white;\n\n        .songItem {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          height: 1.375rem;\n\n          .left {\n            flex: 1;\n            display: flex;\n            align-items: center;\n\n            .index {\n              width: .97rem;\n              text-align: center;\n            }\n\n            .content {\n              width: 4.5rem;\n              display: flex;\n              flex-direction: column;\n\n              .song-title, .song-author {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n              }\n\n              .song-title {\n                font-weight: 700;\n                margin-bottom: .1rem;\n              }\n\n              .song-author {\n                font-size: .27rem;\n                color: #959595;\n              }\n            }\n          }\n\n          .right {\n            .icon {\n              width: .292rem;\n              height: .292rem;\n              margin-right: .42rem;\n\n              &:first-of-type {\n                margin-left: .2rem;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./SearchTop.vue?vue&type=template&id=064ebfb2&scoped=true\"\nimport script from \"./SearchTop.vue?vue&type=script&lang=js\"\nexport * from \"./SearchTop.vue?vue&type=script&lang=js\"\n\nimport \"./SearchTop.vue?vue&type=style&index=0&id=064ebfb2&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-064ebfb2\"\n\nexport default script","import { render } from \"./Search.vue?vue&type=template&id=21de37f8\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchTop.vue?vue&type=style&index=0&id=064ebfb2&lang=less&scoped=true\""],"sourceRoot":""}